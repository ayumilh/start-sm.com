<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menu Principal</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">

  <style>
    button#btnPagar {
      background-color: #28a745;
      color: white;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }

    @media (min-width: 1024px) {
      #dropdownMenu {
        display: none;
        position: absolute;
        top: 100%;
        right: 0;
        background-color: white;
        border: 1px solid #ddd;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        width: 200px;
        z-index: 50;
      }
    }
  </style>
</head>

<body class="bg-gray-200 text-gray-800">
  <div class="flex h-screen">
    <!-- Menu Lateral Fixo e Expandido -->
    <aside
      class="w-64 text-blue-100 text-white flex flex-col fixed inset-0 z-10 lg:block hidden border-r-2 border-gray-400">
      <div class="w-full flex items-center justify-center pt-6 pb-4">
        <img src="https://i.ibb.co/p0cKr26/Captura-de-Tela-2024-12-13-a-s-08-54-39-removebg-preview.png" alt="Logo"
          class="w-32 mt-1">
      </div>

      <hr class="w-full border border-gray-400 mb-4">

      <nav class="flex-1 px-2">
        <ul class="space-y-2 p-4">
          <!-- Envio de SMS em Massa -->
          <li id="smsMenuItem">
            <button onclick="showContent('smsContent', 'smsMenuItem')"
              class="flex items-center w-full p-2 text-left hover:text-blue-700 rounded text-gray-800">
              <i class="fas fa-sms mr-3"></i>
              <span class="font-bold">Envio de SMS em Massa</span>
            </button>
          </li>

          <!-- Disparo WhatsApp -->
          <li id="menuItemId">
            <button onclick="showSmsForm('smsFormContainer', 'menuItemId')"
              class="flex items-center w-full p-2 text-left text-gray-800 hover:text-blue-700 rounded">
              <i class="fab fa-whatsapp mr-3"></i>
              <span class="font-bold">Disparo WhatsApp</span>
            </button>
          </li>

          <!-- Adicionar Saldo -->
          <li id="saldoMenuItem">
            <button onclick="showContent('saldoContent', 'saldoMenuItem')"
              class="flex items-center w-full p-2 text-left text-gray-800 hover:text-blue-700 rounded">
              <i class="fas fa-wallet mr-3"></i>
              <span class="font-bold">Adicionar Saldo</span>
            </button>
          </li>

          <li id="geradorTelefoneMenuItem">
            <button onclick="showContent('geradorContent', 'geradorTelefoneMenuItem')"
              class="flex items-center w-full p-2 text-left text-gray-800 hover:text-blue-700 rounded">
              <i class="fas fa-phone mr-3"></i>
              <span class="font-bold">Gerador de Telefone</span>
            </button>
          </li>

          <!-- Outros Itens Bloqueados -->
          <li class="opacity-50 cursor-not-allowed">
            <div class="flex items-center w-full p-2 text-gray-800 hover:text-blue-700">
              <i class="fas fa-mobile-alt mr-3"></i>
              <span class="font-bold">Consultar Operadora</span>
            </div>
          </li>
        </ul>
      </nav>

    </aside>

    <!-- MOBILE e TABLET: menu hamburger -->
    <div
      class="flex flex-col lg:hidden items-center justify-between p-4 md:p-6 bg-gray-200 text-white fixed z-20 w-full">
      <header
        class="w-full flex gap-2 justify-end items-end bg-gray-200 text-gray-800 lg:hidden border-b-2 border-gray-200">
        <button id="hamburgerBtn" class="text-white focus:outline-none p-2">
          <i class="fas fa-bars text-2xl text-blue-700"></i> <!-- 칈cone de menu hamb칰rguer -->
        </button>

        <div class="w-full flex flex-col gap-2 justify-end items-end text-gray-800">
          <!-- Dropdown de usu치rio -->
          <div class="relative">
            <div class="dropdown flex flex-col items-center">
              <!-- O link de ativa칞칚o do dropdown -->
              <button id="userDropdownBtnMobile" class="flex items-center text-dark text-decoration-none">
                <img src="https://i.pinimg.com/736x/61/f7/5e/61f75ea9a680def2ed1c6929fe75aeee.jpg" alt="user" width="30"
                  height="30" class="rounded-full">
                <span class="ml-2">
                  <?php echo $nome; ?>
                </span>
                <i id="dropdownIconMobile"
                  class="ml-2 fas fa-chevron-down transition-transform duration-300 ease-in-out"></i>
              </button>

              <!-- O menu do dropdown -->
              <div id="dropdownMenuMobile"
                class="dropdown-menu absolute right-0 top-10 hidden bg-white border border-gray-300 rounded-lg shadow-lg w-52 z-50">
                <a class="dropdown-item flex items-start px-4 py-3 text-gray-700 hover:bg-gray-200" href="#">Menu
                  Principal</a>
                <a class="dropdown-item flex items-start px-4 py-2 text-gray-700 hover:bg-gray-200"
                  href="../dashboard/campanhas.php">Hist칩rico de campanhas</a>
                <a class="dropdown-item flex items-start px-4 py-2 text-gray-700 hover:bg-gray-200"
                  href="?logout=true">Sair</a>
              </div>
            </div>
          </div>

          <!-- Exibe o saldo dispon칤vel com o 칤cone -->
          <div class="saldo flex items-center">
            <i class="fas fa-wallet mr-2 text-lg text-blue-700"></i> <!-- 칈cone de Carteira -->
            <p class="text-sm text-gray-800">
              Saldo dispon칤vel: <strong class="ml-1">
                <?php echo number_format($usuario['saldo'], 2, ',', '.'); ?> REAIS
              </strong>
            </p>
          </div>
        </div>
      </header>

      <div class="flex justify-between items-center mt-5 gap-5 w-full">
        <!-- Bot칚o de hist칩rico de saldo -->
        <button type="button"
          class="w-full flex items-center gap-2 h-12 px-3 py-2 text-gray-800 rounded-md border-none bg-blue-500 bg-opacity-90 hover:bg-opacity-100 text-center shadow-md hover:shadow-lg whitespace-nowrap">
          <i class="fas fa-history text-sm text-white"></i>
          <span class="text-gray-200 whitespace-nowrap text-sm lg:text-base">Hist칩rico de Saldo</span>
        </button>

        <a href="../dashboard/campanhas.php"
          class="flex items-center gap-2 w-full h-12 px-3 py-2 text-gray-800 rounded-md border-none bg-blue-500 bg-opacity-90 hover:bg-opacity-100 text-center shadow-md hover:shadow-lg whitespace-nowrap"
          target="_blank">
          <i class="fas fa-clipboard-list text-sm text-gray-200"></i>
          <p class="text-gray-200 whitespace-nowrap text-sm lg:text-base">Hist칩rico de Campanhas</p>
        </a>
      </div>
    </div>

    <!-- MOBILE e TABLET: menu hamburger -->
    <aside id="mobileMenu"
      class="w-64 bg-gray-200 text-white flex flex-col fixed inset-0 z-30 transform translate-x-full transition-transform duration-500 ease-in-out border-r-2 border-gray-400 hidden lg:hidden">
      <div class="p-2 lg:p-6 flex flex-col justify-between items-center border-b-2 border-gray-400">
        <div class="w-full flex justify-end items-center mb-4 pr-6 mt-4">
          <!-- Bot칚o de Fechar Menu -->
          <button id="closeMenuBtn" class="text-white focus:outline-none">
            <i class="fas fa-times text-3xl text-blue-700"></i> <!-- 칈cone de fechar -->
          </button>
        </div>

        <!-- Logo -->
        <img src="https://i.ibb.co/p0cKr26/Captura-de-Tela-2024-12-13-a-s-08-54-39-removebg-preview.png" alt="Logo"
          class="w-32 mb-4">
      </div>

      <nav class="flex-1 px-2">
        <ul class="space-y-2 p-4">
          <!-- Envio de SMS em Massa -->
          <li id="smsMenuItem">
            <button onclick="showContent('smsContent', 'smsMenuItem')"
              class="flex items-center w-full p-2 text-left hover:text-blue-700 rounded text-gray-800">
              <i class="fas fa-sms mr-3"></i>
              <span class="font-bold">Envio de SMS em Massa</span>
            </button>
          </li>

          <!-- Disparo WhatsApp -->
          <li id="menuItemId">
            <button onclick="showSmsForm('smsFormContainer', 'menuItemId')"
              class="flex items-center w-full p-2 text-left text-gray-800 hover:text-blue-700 rounded">
              <i class="fab fa-whatsapp mr-3"></i>
              <span class="font-bold">Disparo WhatsApp</span>
            </button>
          </li>

          <!-- Adicionar Saldo -->
          <li id="saldoMenuItem">
            <button onclick="showContent('saldoContent', 'saldoMenuItem')"
              class="flex items-center w-full p-2 text-left text-gray-800 hover:text-blue-700 rounded">
              <i class="fas fa-wallet mr-3"></i>
              <span class="font-bold">Adicionar Saldo</span>
            </button>
          </li>

          <li id="geradorTelefoneMenuItem">
            <button onclick="showContent('geradorContent', 'geradorTelefoneMenuItem')"
              class="flex items-center w-full p-2 text-left text-gray-800 hover:text-blue-700 rounded">
              <i class="fas fa-phone mr-3"></i>
              <span class="font-bold">Gerador de Telefone</span>
            </button>
          </li>

          <!-- Outros Itens Bloqueados -->
          <li class="opacity-50 cursor-not-allowed">
            <div class="flex items-center w-full p-2 text-gray-800 hover:text-blue-700">
              <i class="fas fa-mobile-alt mr-3"></i>
              <span class="font-bold">Consultar Operadora</span>
            </div>
          </li>
        </ul>
      </nav>
    </aside>

    <!-- Conte칰do Principal -->
    <main class="flex-1 lg:ml-64 p-4 lg:p-0">
      <header
        class="w-full mb-6 flex gap-4 justify-between p-4 lg:px-4 items-center border-b-2 border-gray-200 bg-gray-200 hidden lg:flex">
        <div class="flex justify-between items-center gap-3 xl:gap-5 w-full max-w-xs">
          <!-- Bot칚o de hist칩rico de saldo -->
          <button type="button" onclick="showSaldoModal()"
            class="w-full px-3 py-2 text-gray-800 rounded-md border-none bg-blue-500 bg-opacity-90 hover:bg-opacity-100 text-center shadow-md hover:shadow-lg whitespace-nowrap">
            <i class="fas fa-history text-sm text-white"></i>
            <span class="text-gray-200 whitespace-nowrap">Hist칩rico de Saldo</span>
          </button>

          <a href="../dashboard/campanhas.php"
            class="flex items-center gap-2 w-full px-3 py-2 text-gray-800 rounded-md border-none bg-blue-500 bg-opacity-90 hover:bg-opacity-100 text-center shadow-md hover:shadow-lg whitespace-nowrap"
            target="_blank">
            <i class="fas fa-clipboard-list text-sm text-gray-200"></i>
            <p class="text-gray-200 whitespace-nowrap">Hist칩rico de Campanhas</p>
          </a>
        </div>
        <div class="flex justify-between items-center gap-5 w-full max-w-xs">
          <!-- Exibe o saldo dispon칤vel com o 칤cone -->
          <div class="saldo flex items-center mt-2">
            <i class="fas fa-wallet mr-2 text-xl text-blue-700"></i> <!-- 칈cone de Carteira -->
            Saldo dispon칤vel: <strong class="ml-1">
              <?php echo number_format($usuario['saldo'], 2, ',', '.'); ?> REAIS
            </strong>
          </div>

          <!-- Dropdown de usu치rio -->
          <div class="relative">
            <div class="dropdown flex flex-col items-center">
              <!-- O link de ativa칞칚o do dropdown -->
              <button id="userDropdownBtn" class="flex items-center text-dark text-decoration-none"
                onclick="toggleDropdownAndIcon()">
                <i class="ml-2 fas fa-user-circle text-2xl"></i>
                <span class="ml-2">
                  <?php echo $nome; ?>
                </span>
                <i id="dropdownIcon" class="ml-2 fas fa-chevron-down transition-transform duration-300 ease-in-out"></i>
              </button>

              <!-- O menu do dropdown -->
              <div id="dropdownMenu"
                class="dropdown-menu absolute right-0 top-10 hidden bg-white border border-gray-300 rounded-lg shadow-lg w-52 z-50">
                <a class="dropdown-item flex items-start px-4 py-3 text-gray-700 hover:bg-gray-200" href="#">Menu
                  Principal</a>
                <a class="dropdown-item flex items-start px-4 py-2 text-gray-700 hover:bg-gray-200"
                  href="../dashboard/campanhas.php">Hist칩rico de campanhas</a>
                <a class="dropdown-item flex items-start px-4 py-2 text-gray-700 hover:bg-gray-200"
                  href="?logout=true">Sair</a>
              </div>
            </div>
          </div>
        </div>
      </header>

      <!-- Conte칰do de Envio de SMS -->
      <div id="smsContent"
        class="modal mt-40 md:mt-46 lg:mt-0 content-section bg-white p-6 rounded-lg shadow-lg w-full lg:max-w-2xl xl:max-w-3xl mx-auto">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-xl text-gray-800 font-semibold">Envio de SMS</h2>
          <button onclick="hideContent('smsContent')" class="text-xl text-gray-500"></button>
        </div>
        <div class="flex flex-col gap-4 items-start">
          <p class="text-gray-800 font-semibold">Digite a mensagem a ser enviada:</p>
          <textarea id="smsMessage" rows="4" maxlength="200" placeholder="Digite sua mensagem"
            class="w-full p-3 border border-gray-300 rounded-md text-base text-gray-800 font-normal"></textarea>

          <p class="text-gray-800 font-semibold">Carregar lista de n칰meros (.txt):</p>
          <input type="file" id="fileUpload" accept=".txt" onchange="handleFileChange()"
            class="w-full p-3 border border-gray-300 rounded-md text-gray-800 font-semibold">

          <p id="fileStatus" class="text-gray-800 font-semibold">Nenhum arquivo carregado</p>
          <p id="smsQuantityText" class="text-gray-800"></p>

          <p class="total text-yellow-600 font-semibold">
            Valor do envio: <span class="">-</span> R$
            <span id="smsTotal">0,00</span>
          </p>

          <p class="text-gray-800 font-semibold text-xl">Saldo restante: <span id="discountedBalance">R$ 0,00</span></p>

          <hr class="border border-gray-200 w-full">

          <div class="w-full flex flex-col md:flex-row gap-4 px-1 md:-px-4 justify-between items-start lg:items-center">
            <div class="w-full flex items-center gap-2">
              <p class="w-full text-blue-500 font-semibold text-2xl whitespace-nowrap">Saldo atual: <span
                  id="userBalance" class="text-lg text-gray-900">R$
                  <?php echo number_format($usuario['saldo'], 2, ',', '.'); ?>
                </span></p>
            </div>

            <div class="flex w-full justify-end gap-3">
              <button id="sendSmsButton"
                class="w-full confirmaCompra px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 hover:shadow-sm"
                onclick="sendSms()" disabled>Enviar</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Formul치rio de Campanha de SMS -->
      <div id="smsFormContainer" class="content-section">
        <div class="bg-white mt-40 md:mt-46 lg:mt-0 p-6 rounded-lg shadow-lg lg:max-w-2xl xl:max-w-3xl w-full mx-auto">
          <h4 class="w-full flex text-xl lg:text-2xl font-semibold text-gray-800 mb-6 items-start">Configurar Campanha
            de
            SMS</h4>
          <form id="smsForm" method="POST" class="w-full flex flex-col gap-5">

            <!-- N칰meros de Telefone -->
            <div class="form-group w-full flex flex-col items-start gap-2">
              <label for="numeros" class="text-lg font-medium text-gray-700">N칰meros de Telefone (um por linha)</label>
              <textarea
                class="p-4 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
                id="numeros" rows="3" placeholder="Exemplo de Formata칞칚o Correta: 5511988888888"></textarea>
              <small id="numero-contador" class="text-sm text-gray-500">0 / 30.000 n칰meros</small>
            </div>

            <!-- Escolher Mensagem -->
            <div class="form-group w-full flex flex-col items-start gap-2">
              <label for="mensagem" class="text-lg font-medium text-gray-700">Escolher Mensagem</label>
              <select
                class="p-3 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
                id="mensagem">
                <?php foreach ($mensagens as $mensagem): ?>
                <option value="<?= htmlspecialchars($mensagem['mensagem']) ?>">
                  <?= htmlspecialchars($mensagem['mensagem']) ?>
                </option>
                <?php endforeach; ?>
              </select>
            </div>

            <!-- Link a ser Encurtado -->
            <div class="form-group w-full flex flex-col items-start gap-2">
              <label for="link" class="text-lg font-medium text-gray-700">Link a ser encurtado</label>
              <input type="url"
                class="p-3 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
                id="link" placeholder="Digite o SEU Link" oninput="atualizarMensagem()">
            </div>

            <!-- Escolher Encurtador -->
            <div class="form-group w-full flex flex-col items-start gap-2">
              <label for="encurtador" class="text-lg font-medium text-gray-700">Escolher Encurtador</label>
              <select
                class="p-3 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"
                id="encurtador" onchange="atualizarMensagem()">
                <?php foreach ($encurtadores as $encurtador): ?>
                <option value="<?= htmlspecialchars($encurtador['nome']) ?>">
                  <?= htmlspecialchars($encurtador['nome']) ?>
                </option>
                <?php endforeach; ?>
              </select>
            </div>

            <!-- Mensagem Gerada -->
            <div class="form-group w-full flex flex-col items-start gap-2">
              <label for="mensagem-gerada" class="text-lg font-medium text-gray-700">Mensagem Gerada</label>
              <textarea
                class="bg-gray-200 p-3 w-full border border-gray-300 rounded-md focus:ring focus:ring-none focus:outline-none"
                id="mensagem-gerada" rows="3" readonly></textarea>
            </div>

            <!-- Bot칚o Iniciar Campanha -->
            <button type="button" id="iniciar-campanha"
              class="w-full py-3 mt-5 bg-blue-600 text-white rounded-md text-lg hover:bg-blue-700 transition duration-300">
              Iniciar Campanha e Enviar SMS
            </button>
          </form>
        </div>

        <!-- Loading de Progresso -->
        <div id="progresso-campanha" class="mt-8 hidden">
          <h5 class="text-xl font-semibold text-gray-700">Progresso do Envio</h5>
          <div class="w-full bg-gray-200 rounded-full h-2.5 mt-3">
            <div class="progress-bar bg-blue-600 h-2.5 rounded-full" style="width: 0%;" aria-valuenow="0"
              aria-valuemin="0" aria-valuemax="100">0%</div>
          </div>
          <div class="flex gap-8 mt-4">
            <div class="w-1/2">
              <h6 class="text-lg font-medium text-gray-700">Enviados</h6>
              <ul id="sms-enviados" class="list-group mt-2 hidden"></ul>
            </div>
            <div class="w-1/2">
              <h6 class="text-lg font-medium text-gray-700">N칚o Enviados</h6>
              <ul id="sms-nao-enviados" class="list-group mt-2 hidden"></ul>
            </div>
          </div>
        </div>
      </div>

      <!-- Conte칰do de Adicionar Saldo -->
      <div id="saldoContent"
        class="modal mt-40 md:mt-46 lg:mt-0  content-section p-6 lg:max-w-2xl xl:max-w-3xl bg-white rounded-lg shadow-lg w-full mx-auto">
        <div class="modal-content">
          <div class="modal-header flex justify-between items-center mb-6">
            <h2 class="text-xl font-semibold">Adicionar Saldo de SMS</h2>
          </div>

          <p>Insira a quantidade de SMS desejada:</p>
          <input type="number" id="smsQuantityAdd" min="10" placeholder="Digite a quantidade de SMS"
            oninput="calculateTotal()" class="w-full p-3 border border-gray-300 rounded-md text-lg">

          <p id="transaction-taxa">Ser치 cobrada uma taxa de R$ 1,00 pela transa칞칚o.</p>


          <hr class="border border-gray-200 w-full my-3">

          <div class="w-full flex flex-col md:flex-row gap-4 px-1 md:-px-4 justify-between items-start lg:items-center">
            <div class="w-full flex items-center gap-2">
              <p class="total text-blue-500 font-semibold text-2xl whitespace-nowrap">
                Valor: <span class="text-lg text-gray-900">R$</span> <span id="totalAmount"
                  class="text-lg text-gray-900">0,00</span>
              </p>
            </div>
            <div class="w-full flex justify-end gap-3">
              <button class="w-full px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md"
                onclick="confirmPurchase()">Confirmar</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal de Dados da Transa칞칚o -->
      <div id="transactionModal"
        class="modal flex flex-col content-section bg-white p-6 rounded-lg shadow-lg w-full lg:max-w-2xl xl:max-w-3xl mx-auto mt-40 md:mt-46 lg:mt-0"
        style="display: none;">
        <div class="flex justify-between items-center mb-6">
          <h4 class="w-full flex text-xl lg:text-2xl font-semibold text-gray-800 items-start">Detalhes da Transa칞칚o
          </h4>
          <button onclick="closeTransactionModal()" class="text-4xl font-bold text-gray-800">&times;</button>
        </div>

        <div class="flex flex-col gap-4 items-start">
          <div class="flex items-center gap-2 w-full">
            <p class="text-gray-800 text-lg font-bold">N칰mero da Solicita칞칚o:</p>
            <p id="requestNumber" class="text-gray-800 mt-1"></p>
          </div>

          <div class="flex items-center gap-2 w-full">
            <p class="text-gray-800 text-lg font-bold">Data de Vencimento:</p>
            <p id="dueDate" class="text-gray-800 mt-1"></p>
          </div>

          <div class="flex items-center gap-2 w-full">
            <p class="total text-blue-500 font-semibold text-2xl whitespace-nowrap">Valor Total:</p>
            <p id="totalAmountTransaction" class="text-lg text-gray-900 font-bold mt-1">R$ 0,00</p>
          </div>

          <ul id="productList" class="list-disc pl-5 text-gray-800"></ul>

          <!-- C칩digo Pix s칩 aparecer치 quando o QR Code for gerado -->
          <h3 id="pixTitle" class="text-gray-800 font-semibold hidden">C칩digo Pix:</h3>

          <div id="qrcodeContainer" class="hidden flex justify-between items-center gap-5">
            <!-- QR Code -->
            <div id="qrcode" class="w-30 h-30 flex-shrink-0"></div>
          </div>

          <!-- C칩digo Pix com 칤cone para copiar, s칩 vis칤vel ap칩s gerar o QR Code -->
          <div id="paymentCodeContainer" style="display: none;" class="w-full max-w-full flex flex-col items-start">
            <p id="paymentCode"
              class="bg-green-100 p-2 rounded-md w-full max-w-xs md:max-w-xl lg:max-w-3xl break-words text-gray-800">
            </p>
          </div>

          <div id="copyContainer" style="display: none;" class="flex flex-col items-center justify-center">
            <button id="copyButton"
              class="flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600"
              onclick="copyPaymentCode()">
              <i id="copyIcon" class="fa fa-copy text-lg" title="Copiar c칩digo Pix"></i> Copiar C칩digo
            </button>
          </div>

          <div class="w-full flex flex-col justify-between gap-2 items-center mt-6">
            <button id="btnPagar"
              class="w-full px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 hover:shadow-sm">Gerar
              QrCode</button>
            <button onclick="closeTransactionModal()"
              class="w-full rounded-md bg-blue-600 hover:bg-blue-700 px-4 py-2 text-gray-100">Fechar</button>
          </div>
        </div>
      </div>

      <!-- Modal do Gerador de N칰mero -->
      <div id="geradorContent" class="modal mt-40 md:mt-46 lg:mt-0  content-section p-6 lg:max-w-2xl xl:max-w-3xl w-full mx-auto">
        <div class="bg-white rounded-lg shadow-lg w-full max-w-lg p-6">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-bold text-gray-800">Gerador de N칰mero por Estado</h2>
            <button onclick="closeModalNumero()"
              class="text-gray-600 hover:text-red-600 text-2xl font-bold">&times;</button>
          </div>

          <div class="flex flex-col gap-4">
            <label for="estadoSelect" class="text-gray-700 font-semibold">Escolha o Estado:</label>
            <select id="estadoSelect" class="p-3 border border-gray-300 rounded">
              <option value="">Aleat칩rio</option>
              <option value="AC">Acre</option>
              <option value="AL">Alagoas</option>
              <option value="AM">Amazonas</option>
              <option value="AP">Amap치</option>
              <option value="BA">Bahia</option>
              <option value="CE">Cear치</option>
              <option value="DF">Distrito Federal</option>
              <option value="ES">Esp칤rito Santo</option>
              <option value="GO">Goi치s</option>
              <option value="MA">Maranh칚o</option>
              <option value="MT">Mato Grosso</option>
              <option value="MS">Mato Grosso do Sul</option>
              <option value="MG">Minas Gerais</option>
              <option value="PA">Par치</option>
              <option value="PB">Para칤ba</option>
              <option value="PR">Paran치</option>
              <option value="PE">Pernambuco</option>
              <option value="PI">Piau칤</option>
              <option value="RJ">Rio de Janeiro</option>
              <option value="RN">Rio Grande do Norte</option>
              <option value="RS">Rio Grande do Sul</option>
              <option value="RO">Rond칪nia</option>
              <option value="RR">Roraima</option>
              <option value="SC">Santa Catarina</option>
              <option value="SP">S칚o Paulo</option>
              <option value="SE">Sergipe</option>
              <option value="TO">Tocantins</option>
            </select>

            <button onclick="gerarNumeroRealista()"
              class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
              Gerar N칰mero
            </button>

            <div id="numeroGerado" class="text-lg font-mono text-center mt-2 text-blue-700"></div>
          </div>
        </div>
      </div>

    </main>


    <!-- Modal de Hist칩rico de Saldo -->
    <div class="modal fade" id="saldoModal" tabindex="-1" aria-labelledby="saldoModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="saldoModalLabel">Hist칩rico de Saldo</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <ul class="list-group">
              <?php if (empty($historico_saldo)): ?>
              <li class="list-group-item">Nenhum hist칩rico encontrado.</li>
              <?php else: ?>
              <?php foreach ($historico_saldo as $registro): ?>
              <?php
                                          // Determina o 칤cone e texto com base no tipo
                                          if ($registro['tipo'] === 'adicao') {
                                              $icon = '<i class="fas fa-plus-circle text-success"></i>';
                                              $tipo_texto = 'Adi칞칚o';
                                          } else {
                                              $icon = '<i class="fas fa-minus-circle text-danger"></i>';
                                              $tipo_texto = 'Retirada';
                                          }
                                          ?>
              <li class="list-group-item">
                <?php echo $icon; ?>
                <?php echo $tipo_texto; ?> de R$
                <?php echo number_format($registro['valor'], 2, ',', '.'); ?> -
                <?php echo date('d/m/Y H:i:s', strtotime($registro['data_hora'])); ?>
              </li>
              <?php endforeach; ?>
              <?php endif; ?>
            </ul>
            <button type="button" class="btn btn-primary btn-block mt-3">Adicionar Saldo</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <link rel="stylesheet"
    href="https://cdn.positus.global/production/resources/robbu/whatsapp-button/whatsapp-button.css">

  <script>
    // Fun칞칚o para mostrar o modal de hist칩rico de saldo
    function showSaldoModal() {
      // Exibe o modal
      $('#saldoModal').modal('show');
    }

    const dddsPorEstado = {
      "SP": [11, 12, 13, 14, 15, 16, 17, 18, 19],
      "RJ": [21, 22, 24],
      "MG": [31, 32, 33, 34, 35, 37, 38],
      "ES": [27, 28],
      "PR": [41, 42, 43, 44, 45, 46],
      "SC": [47, 48, 49],
      "RS": [51, 53, 54, 55],
      "DF": [61],
      "GO": [62, 64],
      "MT": [65, 66],
      "MS": [67],
      "TO": [63],
      "BA": [71, 73, 74, 75, 77],
      "SE": [79],
      "PE": [81, 87],
      "AL": [82],
      "PB": [83],
      "RN": [84],
      "CE": [85, 88],
      "PI": [86, 89],
      "PA": [91, 93, 94],
      "AP": [96],
      "RR": [95],
      "AM": [92, 97],
      "AC": [68],
      "RO": [69],
      "MA": [98, 99]
    };

    function gerarNumeroRealista() {
      const estado = document.getElementById("estadoSelect").value;
      const estados = Object.keys(dddsPorEstado);
      const estadoEscolhido = estado && dddsPorEstado[estado] ? estado : estados[Math.floor(Math.random() * estados.length)];
      const ddd = dddsPorEstado[estadoEscolhido][Math.floor(Math.random() * dddsPorEstado[estadoEscolhido].length)];
      const numero = `(${ddd}) 9${Math.floor(1000 + Math.random() * 9000)}-${Math.floor(1000 + Math.random() * 9000)}`;
      document.getElementById("numeroGerado").innerText = `游님 ${numero}`;
    }

    function openModalNumero() {
      document.getElementById("modalNumero").classList.remove("hidden");
      document.getElementById("modalNumero").classList.add("flex");
    }

    function closeModalNumero() {
      document.getElementById("modalNumero").classList.remove("flex");
      document.getElementById("modalNumero").classList.add("hidden");
      document.getElementById("numeroGerado").innerText = '';
    }
  </script>

  <script src="js/menu.js"></script>

  <script src="js/displayController.js"></script>

  <script src="js/qrcode.js"></script>


  <script src="js/sendSms.js"></script>

  <!-- Inclus칚o do jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

  <!-- Inclus칚o do Popper.js -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>

  <!-- Incluir Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">


  <!-- Inclus칚o do Bootstrap JS -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


  <a id="robbu-whatsapp-button" target="_blank"
    href="https://api.whatsapp.com/send?phone=5521969195085&text=Adicionar%Saldo!">
    <div class="rwb-tooltip">Fale Conosco</div>
    <img src="https://cdn.positus.global/production/resources/robbu/whatsapp-button/whatsapp-icon.svg"
      alt="WhatsApp Icon" />
  </a>

</body>